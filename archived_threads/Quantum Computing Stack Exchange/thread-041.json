{"question": "\nThe code that I follow is from this tutorial.\nBut there are some errors due to the version of qiskit on the Estimator primitive\nfrom qiskit.primitives import Estimator\nestimator = Estimator([qc], [H]) \ne_result = estimator([qc], [H], [theta])\nprint(e_result)\n\nThis is easy to solve when I fixed it by add estimator attribute like this one\nfrom qiskit.primitives import Estimator\nestimator = Estimator([qc], [H]) \ne_result = estimator.run([qc], [H], [theta])\nprint(e_result.result())`\n\nBut there is a problem  I need your help with regarding the minimize by SPSA, I can't know how to variable the objective. I have tried to add an attribute run on the estimator but now it doesn't work\n# define objective as expectation value of Hamiltonian with circuit ansatz\n\nobjective = lambda x: estimator.run([qc], [H], [x]).values[0]\n\n# instantiate optimizer\n\nfrom qiskit.algorithms.optimizers import SPSA\noptimizer = SPSA(maxiter=500)\n\n# define initial values for our circuit parameters\nx0 = np.random.rand(qc.num_parameters)\n\n# minimize the objective function\nresult = optimizer.minimize(objective, x0=x0)\n\n# store ground state parameters for later\nground_state_params = result.x\n\n# print the resulting ground state energy\nprint(result.fun)\n\nHere is the error\n    Output exceeds the size limit. Open the full output data in a text editor\n---------------------------------------------------------------------------\nAttributeError                            Traceback (most recent call last)\nd:\\Book store\\Learning document\\QC\\Code\\qce22-qiskit-runtime-tutorial-main\\docs\\tutorials\\Building algorithms with Qiskit Runtime.ipynb Cell 24 in <cell line: 5>()\n      2 x0 = np.random.rand(qc.num_parameters)\n      4 # minimize the objective function\n----> 5 result = optimizer.minimize(objective, x0=x0)\n      7 # store ground state parameters for later\n      8 ground_state_params = result.x\n\nFile c:\\Users\\DELL\\anaconda3\\lib\\site-packages\\qiskit\\algorithms\\optimizers\\spsa.py:512, in SPSA.minimize(self, fun, x0, jac, bounds)\n    502 def minimize(\n    503     self,\n    504     fun: Callable[[POINT], float],\n   (...)\n    509     # ensure learning rate and perturbation are correctly set: either none or both\n    510     # this happens only here because for the calibration the loss function is required\n    511     if self.learning_rate is None and self.perturbation is None:\n--> 512         get_eta, get_eps = self.calibrate(fun, x0, max_evals_grouped=self._max_evals_grouped)\n    513     else:\n    514         get_eta, get_eps = _validate_pert_and_learningrate(\n    515             self.perturbation, self.learning_rate\n    516         )\n\nFile c:\\Users\\DELL\\anaconda3\\lib\\site-packages\\qiskit\\algorithms\\optimizers\\spsa.py:333, in SPSA.calibrate(loss, initial_point, c, stability_constant, target_magnitude, alpha, gamma, modelspace, max_evals_grouped)\n    330     pert = bernoulli_perturbation(dim)\n...\nd:\\Book store\\Learning document\\QC\\Code\\qce22-qiskit-runtime-tutorial-main\\docs\\tutorials\\Building algorithms with Qiskit Runtime.ipynb Cell 24 in <lambda>(x)\n      1 # define objective as expectation value of Hamiltonian with circuit ansatz\n----> 3 objective = lambda x: estimator.run([qc], [H], [x]).values[0]\n\nAttributeError: 'PrimitiveJob' object has no attribute 'values'\n\nPlease help me know if you have the answer, thanks\n", "answers": [], "comments": ["I don't see the difference between your first two blocks of code. Also, can you put the error you're getting when running this code, along with the version of qiskit you're using please?", "Oh sorry, my bad, you can check it, I just add attribute to the estimator", "Thanks! Put the error you get with your last code and your qiskit version and we will surely be able to help you then!", "yah, I forgot, sorry", "I think you're missing a result method call. Can you try to transform this line: objective = lambda x: estimator.run([qc], [H], [x]).values[0] to this: objective = lambda x: estimator.run([qc], [H], [x]).result().values[0]?", "Oh, tks for your help, but I have another error in the other path of the tutorial code \ud83d\ude02", "I think this causes because the estimator primitive in the past run and returned the result and now it doesn't, so we need to add the run and result attribute", "Can you post the error you get?"], "link": "https://quantumcomputing.stackexchange.com//questions/30309/the-error-with-estimator-primitive-due-to-the-qiskit-version?r=SearchResults"}