{"0": {"author": "Samarth_Sandeep", "date": "1631603966915", "content": "Tried implementing GBS as per this circuit diagram (https://medium.com/xanaduai/introducing-the-strawberry-fields-applications-layer-b61f55c82689 1) and using the circuits in the X8 tutorial.\nI have tried increasing the number of shots, but I still get very different average photon values for outputs for a set of rotations when running different times. Any way to help make the averages more in accordance with one another?\nThanks!", "link": "https://discuss.pennylane.ai//t/any-way-to-get-consistent-average-photon-values-for-gaussian-boson-sampling-for-same-rotations/1349/1"}, "1": {"author": "Nicolas_Quesada", "date": "1631622694563", "content": "Hi @Samarth_Sandeep \u2014 Could you share the code you are using to generate the samples?", "link": "https://discuss.pennylane.ai//t/any-way-to-get-consistent-average-photon-values-for-gaussian-boson-sampling-for-same-rotations/1349/2"}, "2": {"author": "Samarth_Sandeep", "date": "1631643256628", "content": "    ops.S2gate(1.0) | (q[0], q[4])\n    ops.S2gate(1.0) | (q[1], q[5])\n    ops.S2gate(1.0) | (q[2], q[6])\n    ops.S2gate(1.0) | (q[3], q[7])\n\n    ops.Interferometer(unitary_mat) | (q[0], q[1], q[2], q[3])\n    ops.Rgate(math.pi/2) | q[0]\n    ops.Rgate(math.pi/2) | q[1]\n    ops.Rgate(math.pi/2) | q[2]\n    ops.Rgate(math.pi/2) | q[3]\n    ops.BSgate(math.pi/4, math.pi/2) | (q[1], q[0])\n    ops.BSgate(math.pi/4, math.pi/2) | (q[2], q[3])\n    ops.Rgate(math.pi/2) | q[1]\n    ops.Rgate(math.pi/2) | q[2]\n    ops.Rgate(rmath.pi/2) | q[0]\n    ops.BSgate(math.pi/4, math.pi/2) | (q[1], q[2])\n    ops.Rgate(math.pi/2) | q[3]\n    ops.Rgate(math.pi/2) | q[1]\n    ops.Rgate(math.pi/2) | q[2]\n    ops.BSgate(math.pi/4, math.pi/2) | (q[1], q[0])\n    ops.BSgate(math.pi/4, math.pi/2) | (q[2], q[3])\n    ops.Rgate(math.pi/2) | q[1]\n    ops.Rgate(math.pi/2) | q[2]\n    ops.BSgate(math.pi/4, math.pi/2) | (q[1], q[2])\n\n\n    ops.Interferometer(unitary_mat) | (q[4], q[5], q[6], q[7])\n    ops.Rgate(math.pi/2) | q[4]\n    ops.Rgate(math.pi/2) | q[5]\n    ops.Rgate(math.pi/2) | q[6]\n    ops.Rgate(math.pi/2) | q[7]\n    ops.BSgate(math.pi/4, math.pi/2) | (q[4], q[5])\n    ops.BSgate(math.pi/4, math.pi/2) | (q[6], q[7])\n    ops.Rgate(math.pi/2) | q[5]\n    ops.Rgate(math.pi/2) | q[6]\n    ops.Rgate(math.pi/2) | q[4]\n    ops.BSgate(math.pi/4, math.pi/2) | (q[5], q[6])\n    ops.Rgate(math.pi/2) | q[7]\n    ops.Rgate(math.pi/2) | q[5]\n    ops.Rgate(math.pi/2) | q[6]\n    ops.BSgate(math.pi/4, math.pi/2) | (q[4], q[5])\n    ops.BSgate(math.pi/4, math.pi/2) | (q[6], q[7])\n    ops.Rgate(math.pi/2) | q[5]\n    ops.Rgate(math.pi/2) | q[6]\n    ops.BSgate(math.pi/4, math.pi/2) | (q[5], q[6])\n\n    ops.MeasureFock() | q", "link": "https://discuss.pennylane.ai//t/any-way-to-get-consistent-average-photon-values-for-gaussian-boson-sampling-for-same-rotations/1349/3"}, "3": {"author": "Nicolas_Quesada", "date": "1631715622398", "content": "Hi @Samarth_Sandeep ---- How many samples are you using to calculate averages? Also, are you doing a simulation or are you using the hardware?", "link": "https://discuss.pennylane.ai//t/any-way-to-get-consistent-average-photon-values-for-gaussian-boson-sampling-for-same-rotations/1349/4"}, "4": {"author": "Samarth_Sandeep", "date": "1631731122662", "content": "I\u2019m using the hardware and was doing 1000 shots.", "link": "https://discuss.pennylane.ai//t/any-way-to-get-consistent-average-photon-values-for-gaussian-boson-sampling-for-same-rotations/1349/5"}, "5": {"author": "Nicolas_Quesada", "date": "1631731232543", "content": "Can you also post the results that you got and that seem inconsistent?", "link": "https://discuss.pennylane.ai//t/any-way-to-get-consistent-average-photon-values-for-gaussian-boson-sampling-for-same-rotations/1349/6"}, "6": {"author": "Samarth_Sandeep", "date": "1631739525361", "content": "These both are using the same interferometer angles and same rotation angles, but the photon averages are very different:\nTrial 1:\n[[1 0 2 \u2026 0 2 3]\n[0 1 0 \u2026 0 1 1]\n[1 0 2 \u2026 1 1 0]\n\u2026\n[0 3 0 \u2026 1 2 1]\n[2 0 4 \u2026 1 3 1]\n[0 0 0 \u2026 0 0 4]]\n[0.98  1.    0.925 0.82  0.905 0.84  1.085 0.895]\nTrial 2:\n[[0 3 0 \u2026 1 2 0]\n[2 1 3 \u2026 1 3 3]\n[0 0 2 \u2026 1 1 0]\n\u2026\n[0 0 0 \u2026 0 0 0]\n[0 0 3 \u2026 2 1 0]\n[4 0 0 \u2026 0 0 2]]\n[1.03  0.87  0.93  0.975 1.    0.89  0.91  1.005]", "link": "https://discuss.pennylane.ai//t/any-way-to-get-consistent-average-photon-values-for-gaussian-boson-sampling-for-same-rotations/1349/7"}, "7": {"author": "Nicolas_Quesada", "date": "1631810667072", "content": "Hi @Samarth_Sandeep \u2014 From a quick statistical analysis the means you report have a relative difference\n\\text{rel_dif} = \\frac{|\\text{mean1} - \\text{mean2}|}{\\tfrac12 (\\text{mean1} + \\text{mean2})} \nof at most 17% . This is a bit too high but is not wholly inconsistent with a simple estimate that will predict a relative difference of on the order of 1/\\sqrt{M} \\sim 3\\% for M=1000 thousand samples.\nCan I suggest you use more samples to estimate these averages. If you increase the number of samples by one-hundred fold, you should expect to decrease the relative difference by one order of magnitude.\nHope this helps,\nNicolas", "link": "https://discuss.pennylane.ai//t/any-way-to-get-consistent-average-photon-values-for-gaussian-boson-sampling-for-same-rotations/1349/8"}, "8": {"author": "Samarth_Sandeep", "date": "1631820674164", "content": "Thanks for the answer @Nicolas_Quesada! Will give it a shot (no pun intended). That makes sense.1", "link": "https://discuss.pennylane.ai//t/any-way-to-get-consistent-average-photon-values-for-gaussian-boson-sampling-for-same-rotations/1349/9"}, "9": {"author": "Samarth_Sandeep", "date": "1631603966915", "content": "Tried implementing GBS as per this circuit diagram (https://medium.com/xanaduai/introducing-the-strawberry-fields-applications-layer-b61f55c82689 1) and using the circuits in the X8 tutorial.\nI have tried increasing the number of shots, but I still get very different average photon values for outputs for a set of rotations when running different times. Any way to help make the averages more in accordance with one another?\nThanks!", "link": "https://discuss.pennylane.ai//t/any-way-to-get-consistent-average-photon-values-for-gaussian-boson-sampling-for-same-rotations/1349/10"}, "10": {"author": "Nicolas_Quesada", "date": "1631810667072", "content": "Hi @Samarth_Sandeep \u2014 From a quick statistical analysis the means you report have a relative difference\n\\text{rel_dif} = \\frac{|\\text{mean1} - \\text{mean2}|}{\\tfrac12 (\\text{mean1} + \\text{mean2})} rel_dif=|mean1\u2212mean2|12(mean1+mean2)\nof at most 17% . This is a bit too high but is not wholly inconsistent with a simple estimate that will predict a relative difference of on the order of 1/\\sqrt{M} \\sim 3\\%1/\u221aM\u223c3% for M=1000M=1000 thousand samples.\nCan I suggest you use more samples to estimate these averages. If you increase the number of samples by one-hundred fold, you should expect to decrease the relative difference by one order of magnitude.\nHope this helps,\nNicolas", "link": "https://discuss.pennylane.ai//t/any-way-to-get-consistent-average-photon-values-for-gaussian-boson-sampling-for-same-rotations/1349/11"}}