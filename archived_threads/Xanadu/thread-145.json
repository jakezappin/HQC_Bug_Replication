{"0": {"author": "ndcroos", "date": "1693323707680", "content": "Hi, I am trying to make a first contribution to Catalyst, in test_template.py in frontend.\nI am following the installing guide of catalyst.\nI am running in the directory catalyst. I am not sure if I am running the commands in the correct directory.\nI created a python virtual environment.\nI executed:\npip install -r requirements.txt\nAnd:\ngit submodule update --unit --depth=1\nBut when I execute make test-frontend, I get the following error:\ncheck the Catalyst lit test suite\ncmake --build /home/nick-test/Documents/catalyst//mlir/build --target check-frontend\nError: /home/nick-test/Documents/catalyst/mlir/build is not a directory\nmake: *** [Makefile:71: lit] Error 1\n\nThen I create the build directory.\nWhen I execute make test-frontend again, I get the following error:\ncheck the Catalyst lit test suite\ncmake --build /home/nick-test/Documents/catalyst//mlir/build --target check-frontend\nError: could not load cache\nmake: *** [Makefile:71: lit] Error 1\n1 Reply", "link": "https://discuss.pennylane.ai//t/error-running-make-test-targets-in-frontend-for-catalyst/3369/1"}, "1": {"author": "Romain_Moyard", "date": "1693328692630", "content": "Hello @ndcroos ! For contributing to Catalyst I would suggest you to install the project from source: Installation \u2014 Catalyst 0.2.2-dev documentation 1 You will need to run make all first and then it will populate the mlir build folder. After that you should be able to run make test-frontend\nLet me know if it helps ?1", "link": "https://discuss.pennylane.ai//t/error-running-make-test-targets-in-frontend-for-catalyst/3369/2"}, "2": {"author": "josh", "date": "1693331159650", "content": "\n\n\n ndcroos:\n\nHi, I am trying to make a first contribution to Catalyst\n\n\n@ndcroos this is exciting, let us know what you are thinking and what we can help with once you have the tests up and running \nIn addition, I believe our CI on GitHub will automatically run the tests, so a draft PR could be another avenue to test your work.1", "link": "https://discuss.pennylane.ai//t/error-running-make-test-targets-in-frontend-for-catalyst/3369/3"}, "3": {"author": "ndcroos", "date": "1693347656979", "content": "Thanks @Romain_Moyard and @josh for answering. However, it seems like I also have to solve another issue with the cmake version, before I can continue.\nBut meanwhile, I can use the CI for running tests. Thanks for the suggestion.", "link": "https://discuss.pennylane.ai//t/error-running-make-test-targets-in-frontend-for-catalyst/3369/4"}, "4": {"author": "ndcroos", "date": "1693500314317", "content": "I tried @Romain_Moyard\u2019s suggestions. I was able to run make all.\nWhen I run make test-frontend, test_autograph.py fails because of ModuleNotFoundError: No module named 'tensorflow'\ntensorflow needs to be added to requirements.txt. There is another open PR about this issue:\n\ngithub.com/PennyLaneAI/catalyst\n\n\n\n\n\n\n\n\n[Build system] Add tensorflow to requirements.\n\n\nPennyLaneAI:main \u2190 PennyLaneAI:eochoa/2023-08-31/tensorflow-to-requirements\n\n\n\n          opened \n\n\n\nAug 31, 2023\n\n\n\n\n\n            erick-xanadu\n          \n\n\n\n+1\n-0\n\n\n\n\n\n\n**Context:** With autograph and autograph tests, maybe it makes sense to add ten\u2026sorflow to the list of requirements.\n\n**Description of the Change:** Add tensorflow to requirements.\n\n**Benefits:** `make test-frontend` passes. Previously a lit test requirement tensorflow failed.\n\n**Possible Drawbacks:**\n\n**Related GitHub Issues:**\n\n\n\n\n\n\nAfter running pip install tensorflow, I run make test-frontend, but I get this error:\n[0/1] Run the frontend tests\nFAIL: Frontend Tests :: test_autograph.py (16 of 16)\n******************** TEST 'Frontend Tests :: test_autograph.py' FAILED ********************\nScript:\n--\n: 'RUN: at line 17';   /home/nick-test/Documents/venv_catalyst/bin/python3 /home/nick-test/Documents/catalyst/frontend/test/lit/test_autograph.py | FileCheck /home/nick-test/Documents/catalyst/frontend/test/lit/test_autograph.py\n--\nExit Code: 1\n\nCommand Output (stderr):\n--\n2023-08-31 18:08:46.149415: W tensorflow/compiler/tf2tensorrt/utils/py_utils.cc:38] TF-TRT Warning: Could not find TensorRT\n/home/nick-test/Documents/catalyst/frontend/test/lit/test_autograph.py:253:11: error: CHECK: expected string not found in input\n # CHECK: (y, z) = (0, False)\n          ^\n<stdin>:135:24: note: scanning from here\n def if_assign_multiple(x: float):\n                       ^\n<stdin>:138:2: note: possible intended match here\n y, z = (0, False)\n ^\n\nInput file: <stdin>\nCheck file: /home/nick-test/Documents/catalyst/frontend/test/lit/test_autograph.py\n\n-dump-input=help explains the following input dump.\n\nInput was:\n<<<<<<\n             .\n             .\n             .\n           130:  \n           131: Conditional requires consistent return types across all branches, got: \n           132:  - Branch at index 0: [ShapedArray(float64[], weak_type=True)] \n           133:  - Branch at index 1: [ShapedArray(int64[], weak_type=True)] \n           134: Please specify an else branch if none was specified. \n           135:  def if_assign_multiple(x: float): \ncheck:253'0                            X~~~~~~~~~~~ error: no match found\n           136:  \"\"\"Test a conditional that assigns to multiple existing variables.\"\"\" \ncheck:253'0     ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n           137:  with ag__.FunctionScope('if_assign_multiple', 'fscope', ag__.ConversionOptions(recursive=True, user_requested=True, optional_features=(), internal_convert_user_code=True)) as fscope: \ncheck:253'0     ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n           138:  y, z = (0, False) \ncheck:253'0     ~~~~~~~~~~~~~~~~~~~\ncheck:253'1      ?                  possible intended match\n           139:  \ncheck:253'0     ~\n           140:  def get_state(): \ncheck:253'0     ~~~~~~~~~~~~~~~~~~\n           141:  return (y, z) \ncheck:253'0     ~~~~~~~~~~~~~~~\n           142:  \ncheck:253'0     ~\n           143:  def set_state(vars_): \ncheck:253'0     ~~~~~~~~~~~~~~~~~~~~~~~\n             .\n             .\n             .\n>>>>>>\n\n--\n\n********************\n********************\nFailed Tests (1):\n  Frontend Tests :: test_autograph.py\n\n\nTesting Time: 131.58s\n  Passed: 15\n  Failed:  1\n", "link": "https://discuss.pennylane.ai//t/error-running-make-test-targets-in-frontend-for-catalyst/3369/5"}, "5": {"author": "Romain_Moyard", "date": "1693503875450", "content": "Thanks @ndcroos for your feedback, I think there might be an issue with tensorflow version. Could you share what version was installed? (On the CI tests we install python3 -m pip install tensorflow-cpu which is currently 2.13.0).\nWe will update the test suite to skip the test if TF is not installed. In the meantime you should not worry about this issue as the CI tests should run without an issue.\nThanks for reaching out and let me know if it helps 2", "link": "https://discuss.pennylane.ai//t/error-running-make-test-targets-in-frontend-for-catalyst/3369/6"}, "6": {"author": "ndcroos", "date": "1693504761411", "content": "When I run pip show tensorflow, I get:\nName: tensorflow\nVersion: 2.13.0\n", "link": "https://discuss.pennylane.ai//t/error-running-make-test-targets-in-frontend-for-catalyst/3369/7"}, "7": {"author": "CatalinaAlbornoz", "date": "1693922036603", "content": "Hi @ndcroos, thanks for reaching out. Our team will take a look at this and come back with an answer.", "link": "https://discuss.pennylane.ai//t/error-running-make-test-targets-in-frontend-for-catalyst/3369/8"}, "8": {"author": "Romain_Moyard", "date": "1693923088589", "content": "Hi @ndcroos , is the issue persisting? There is probably some version mismatch that removes the parenthesis but it should not be a blocker for your PR. Can you share your full environment?", "link": "https://discuss.pennylane.ai//t/error-running-make-test-targets-in-frontend-for-catalyst/3369/9"}, "9": {"author": "ndcroos", "date": "1693946670139", "content": "Hi, I haven\u2019t found the time to further on this, but I did run the tests again now, to see what the results are.\nI work on a Debian 12 system. I just fetched the updates upstream and merged with my local repository. I did pip install -r requirements.txt again. pip list gives this (I installed tensorflow instead of tensorflow-cpu:\nPackage                      Version     Editable project location\n---------------------------- ----------- ----------------------------------\nabsl-py                      1.4.0\nappdirs                      1.4.4\nastroid                      2.15.6\nasttokens                    2.2.1\nastunparse                   1.6.3\nattrs                        23.1.0\nautograd                     1.5\nautoray                      0.6.6\nbackcall                     0.2.0\nblack                        23.7.0\ncachetools                   5.3.1\ncertifi                      2023.7.22\ncharset-normalizer           3.2.0\nclang-format                 14.0.6\nclang-tidy                   14.0.6\nclick                        8.1.7\ncomm                         0.1.4\ncoverage                     7.3.0\ndebugpy                      1.6.7.post1\ndecorator                    5.1.1\ndill                         0.3.7\nexecnet                      2.0.2\nexecuting                    1.2.0\nfastjsonschema               2.18.0\nflatbuffers                  23.5.26\nfuture                       0.18.3\ngast                         0.4.0\ngoogle-auth                  2.22.0\ngoogle-auth-oauthlib         1.0.0\ngoogle-pasta                 0.2.0\ngrpcio                       1.57.0\nh5py                         3.9.0\nidna                         3.4\niniconfig                    2.0.0\nipykernel                    6.25.1\nipython                      8.14.0\nisort                        5.12.0\njax                          0.4.13\njaxlib                       0.4.13\njedi                         0.19.0\njsonschema                   4.19.0\njsonschema-specifications    2023.7.1\njupyter_client               8.3.1\njupyter_core                 5.3.1\nkeras                        2.13.1\nlazy-object-proxy            1.9.0\nlibclang                     16.0.6\nlit                          16.0.6\nMarkdown                     3.4.4\nMarkupSafe                   2.1.3\nmatplotlib-inline            0.1.6\nmccabe                       0.7.0\nml-dtypes                    0.2.0\nmypy-extensions              1.0.0\nnbclient                     0.6.8\nnbformat                     5.9.2\nnbmake                       1.4.3\nnest-asyncio                 1.5.7\nnetworkx                     3.1\nnumpy                        1.23.5\noauthlib                     3.2.2\nopt-einsum                   3.3.0\npackaging                    23.1\nparso                        0.8.3\npathspec                     0.11.2\nPennyLane                    0.32.0\npennylane-catalyst           0.2.2.dev0  /home/nick-test/Documents/catalyst\nPennyLane-Lightning          0.32.0\npexpect                      4.8.0\npickleshare                  0.7.5\npip                          23.0.1\nplatformdirs                 3.10.0\npluggy                       1.3.0\nprompt-toolkit               3.0.39\nprotobuf                     4.24.2\npsutil                       5.9.5\nptyprocess                   0.7.0\npure-eval                    0.2.2\npyasn1                       0.5.0\npyasn1-modules               0.3.0\npybind11                     2.11.1\nPygments                     2.16.1\npylint                       2.17.5\npytest                       7.4.0\npytest-cov                   4.1.0\npytest-mock                  3.11.1\npytest-xdist                 3.3.1\npython-dateutil              2.8.2\nPyYAML                       6.0.1\npyzmq                        25.1.1\nreferencing                  0.30.2\nrequests                     2.31.0\nrequests-oauthlib            1.3.1\nrpds-py                      0.10.0\nrsa                          4.9\nrustworkx                    0.13.1\nscipy                        1.11.2\nsemantic-version             2.10.0\nsetuptools                   66.1.1\nsix                          1.16.0\nstack-data                   0.6.2\ntensorboard                  2.13.0\ntensorboard-data-server      0.7.1\ntensorflow                   2.13.0\ntensorflow-estimator         2.13.0\ntensorflow-io-gcs-filesystem 0.33.0\ntermcolor                    2.3.0\ntokenize-rt                  5.2.0\ntoml                         0.10.2\ntomlkit                      0.12.1\ntornado                      6.3.3\ntraitlets                    5.9.0\ntyping_extensions            4.5.0\nurllib3                      1.26.16\nwcwidth                      0.2.6\nWerkzeug                     2.3.7\nwheel                        0.41.2\nwrapt                        1.15.0\n\nI am not sure if I need to run make runtime again. It takes quite some time on my system. I did not run it this time, but I did run make test-frontend. The text output gives errors relating to a wrong version of jaxlib.\nCommand Output (stderr):\n--\n/home/nick-test/Documents/catalyst/frontend/catalyst/__init__.py:29: UserWarning: Catalyst detected a version mismatch for the installed 'jaxlib' package. Please make sure to install the exact version required by Catalyst to avoid undefined behaviour.\nExpected: 0.4.14 Found: 0.4.13\n", "link": "https://discuss.pennylane.ai//t/error-running-make-test-targets-in-frontend-for-catalyst/3369/10"}, "10": {"author": "Romain_Moyard", "date": "1693953193539", "content": "Hi @ndcroos , we just released a new version of Catalyst and it requires a new version of Jax. Unfortunately you have to git submodule update and after that you need to rebuild Catalyst with make all. The last step will take some time.", "link": "https://discuss.pennylane.ai//t/error-running-make-test-targets-in-frontend-for-catalyst/3369/11"}, "11": {"author": "ndcroos", "date": "1694030505654", "content": "Thanks for your help. I will continue with this, but it will not be during the first few days.", "link": "https://discuss.pennylane.ai//t/error-running-make-test-targets-in-frontend-for-catalyst/3369/12"}}