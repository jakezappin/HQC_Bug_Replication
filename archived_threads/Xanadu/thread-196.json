{"0": {"author": "Einar_Gabbassov", "date": "1621292654637", "content": "Hi,\nI\u2019m new to the pennylane API. So far it looks great!\nI was working through  the VQE tutorial 1.\nMy question is about changing the content of cost_fn attribute of an object of the ExpvalCost class. Specifically, I would like to change the cost function. For example,  I have:\ncost_fn_1 = qml.ExpvalCost(circuit, hamiltonian_1, dev)\ncost_fn_2 = qml.ExpvalCost(circuit, hamiltonian_2, dev)\n\nNow I want to add the cost function of the object cost_fn_2 to the cost function of the object cost_fn_1 like so\ncost_fn_1.cost_fn = cost_fn_1.cost_fn + foo*cost_fn_2.cost_fn - C\n\nwhere foo and C are some variables. The above code gives an error because I\u2019m trying to add function types.\nSo the solution was to create a lambda function like so:\nfinal_cost_fn = lambda x: cost_fn_1.cost_fn(x) + foo*cost_fn_2.cost_fn(x) - C\n\nAnd then assigning final_cost_fn as so\n cost_fn_1.cost_fn = final_cost_fn\n\nThis approach works, but I\u2019m not sure if this is the best way of altering the cost function given that this object will be further used by optimizers and other pennylane objects.\nThank you\n\n\n Solved by josh in post #2 \n\n\n                Hi @Einar_Gabbassov! Welcome. \n\nSo the solution was to create a lambda function like so\u2026 This approach works, but I\u2019m not sure if this is the best way of altering the cost function given that this object will be further used by optimizers and other pennylane objects. \n\nThe approach you have for exte\u2026\n              \n", "link": "https://discuss.pennylane.ai//t/change-the-cost-function-in-the-expvalcost/1050/1"}, "1": {"author": "josh", "date": "1621320189642", "content": "Hi @Einar_Gabbassov! Welcome.\n\nSo the solution was to create a lambda function like so\u2026 This approach works, but I\u2019m not sure if this is the best way of altering the cost function given that this object will be further used by optimizers and other pennylane objects.\n\nThe approach you have for extending the cost function is the recommended approach \nLet us know if you run into any issues with this approach!Solution1", "link": "https://discuss.pennylane.ai//t/change-the-cost-function-in-the-expvalcost/1050/2"}, "2": {"author": "Einar_Gabbassov", "date": "1621292654637", "content": "Hi,\nI\u2019m new to the pennylane API. So far it looks great!\nI was working through  the VQE tutorial 1.\nMy question is about changing the content of cost_fn attribute of an object of the ExpvalCost class. Specifically, I would like to change the cost function. For example,  I have:\ncost_fn_1 = qml.ExpvalCost(circuit, hamiltonian_1, dev)\ncost_fn_2 = qml.ExpvalCost(circuit, hamiltonian_2, dev)\n\nNow I want to add the cost function of the object cost_fn_2 to the cost function of the object cost_fn_1 like so\ncost_fn_1.cost_fn = cost_fn_1.cost_fn + foo*cost_fn_2.cost_fn - C\n\nwhere foo and C are some variables. The above code gives an error because I\u2019m trying to add function types.\nSo the solution was to create a lambda function like so:\nfinal_cost_fn = lambda x: cost_fn_1.cost_fn(x) + foo*cost_fn_2.cost_fn(x) - C\n\nAnd then assigning final_cost_fn as so\n cost_fn_1.cost_fn = final_cost_fn\n\nThis approach works, but I\u2019m not sure if this is the best way of altering the cost function given that this object will be further used by optimizers and other pennylane objects.\nThank you\n\n\n Solved by josh in post #2 \n\n\n                Hi @Einar_Gabbassov! Welcome. \n\nSo the solution was to create a lambda function like so\u2026 This approach works, but I\u2019m not sure if this is the best way of altering the cost function given that this object will be further used by optimizers and other pennylane objects. \n\nThe approach you have for exte\u2026\n              \n", "link": "https://discuss.pennylane.ai//t/change-the-cost-function-in-the-expvalcost/1050/3"}}